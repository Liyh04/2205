## 第五组NOGO大作业report_2

> 本报告由于佳鑫同学主要编写，李屹桦、杨东录同学辅助编写。

### 小组分工

* 于佳鑫同学实现了游戏逻辑部分，包括但不限于

  3.保存行棋记录到本地 、复现棋盘；4.高亮对手和自己最近一步棋子；5.实现11和13路不围棋：这是在stage1文件的基础上稍加修改做出来的，与9路联网不围棋文件相互独立。

  >  1.2.6.在上一阶段已经实现
  
* 杨东录同学..

* 李屹桦同学..

### 代码简介



> 900多行的widget.cpp，体现了本组同学高超的读代码能力（
>
> 理论上还应该有一部分代码可以继续封装成单独的类，但由于总是无法处理两个类互相调用的情况，因此除了Rules类、Chess类、InputDialog类成功分离，其他要调用Widget成员，使用Widget的this指针的函数均没能成功分离。



### 具体实现

* 保存行棋记录到本地

  * 由于本组目前设计是禁止一切自杀和他杀行为，所以道理上最后结局只有give up和time limit exceed两种情况。故在行棋记录中，以G结尾代表give up，以T结尾代表time limit exceed。

    > _写完才发现原来要求里改了加T，不过这个确实是在这个要求提出前就写了的......_

  * 结束后，点击save可以保存对局信息。玩家可以选择保存在本地的位置，同时文件自动命名为“save_ 年份日期 _时分秒.txt"。

* 高亮对手和自己最近一步棋子

  * 设计为将对手和自己最近一次下的棋子周围画个圈圈，兼具美观和醒目👍。

    > 高亮采用的颜色为CE0B4D，灵感来源于Pantone发布的2023年度色彩"Viva Magen 18-1750"，象征着朝气、自信和勇敢。由于Pantone并没有公布潘通色号或rgb或hex值，所以本人只好从官网上找到了色卡图片并用取色器取色，最终找到了最接近的CE0B4D :D

  * 本功能在复现时也存在（废话，用的同一个画画函数
  
* 复现棋盘

  * 采用输入的方式，不局限于save文件，玩家可以根据自己的需要复现出想要实现的棋盘

  * 对输入采用宽松的限制~~（主要是因为懒）~~，即只要输入了正确的save格式即可复现出正确的棋盘；

    > 假如格式错误，在大多数情况下（如输入坐标不合法）可以弹窗警告输入错误，小部分情况（如将空格改为其他字符）仍可以复现出正确的棋盘，或者（输入了两个相同的坐标）两个棋子会重叠（但看不出来。。。

+ 实现客户端向服务端发起连接
  + 实践是检验真理的唯一标准，我们在同一台电脑上同时打开两个窗口进行试验，发现一方先点击“RestartServer”，另一方再点击“Reconnect”即可成功连接。

+ 实现发起对局，接受和拒绝对局
  + client先输入用户名和想要执的棋子（输入“w”为白棋，否则为黑棋），并点击READY_OP，server收到消息后输入自己的用户名，并点击READY_OP，游戏开始（若点击REJECT_OP则拒绝）。当黑方落下第一个子时开始计时，因此第一步棋永远不会超时。

+ 实现联机对战通信
  + 

+ 实现联机再来一局
  + 

+ 实现聊天
  + 

### 遇到的问题

* 不愿意透露姓名的两位成员曾经尝试拆分文件，都以失败告终🤡
  * 没有完全失败，至少拆分出了用来判断落子是否合法的Rules类

* 还有好多，不过最最最后都解决了o(*￣▽￣*)ブ
* 关于每步限时的设定：由于这是联机游戏，但我们不知道应该将设置时间的权限交给谁，因此暂时取消了设置时间功能，直接将其设定为一个固定值。

### 感谢

* 感谢孙亚辉老师，潘俊达助教，王卓冉助教在学习和生活上的关心和指导
* 感谢由于佳鑫，李屹桦，杨东录组成的team 5
* 感谢中国人民大学信息学院提供的教学平台



